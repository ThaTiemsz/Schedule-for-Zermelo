parcelRequire=function(e,r,n,t){var i="function"==typeof parcelRequire&&parcelRequire,o="function"==typeof require&&require;function u(n,t){if(!r[n]){if(!e[n]){var f="function"==typeof parcelRequire&&parcelRequire;if(!t&&f)return f(n,!0);if(i)return i(n,!0);if(o&&"string"==typeof n)return o(n);var c=new Error("Cannot find module '"+n+"'");throw c.code="MODULE_NOT_FOUND",c}p.resolve=function(r){return e[n][1][r]||r},p.cache={};var l=r[n]=new u.Module(n);e[n][0].call(l.exports,p,l,l.exports,this)}return r[n].exports;function p(e){return u(p.resolve(e))}}u.isParcelRequire=!0,u.Module=function(e){this.id=e,this.bundle=u,this.exports={}},u.modules=e,u.cache=r,u.parent=i,u.register=function(r,n){e[r]=[function(e,r){r.exports=n},{}]};for(var f=0;f<n.length;f++)u(n[f]);if(n.length){var c=u(n[n.length-1]);"object"==typeof exports&&"undefined"!=typeof module?module.exports=c:"function"==typeof define&&define.amd?define(function(){return c}):t&&(this[t]=c)}return u}({"d6sW":[function(require,module,exports) {
function e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function t(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function n(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}jQuery(document).ready(function(t){var i="webkitTransitionEnd otransitionend oTransitionEnd msTransitionEnd transitionend",a=t(".csstransitions").length>0;a||(i="noTransition");var s=function(){function s(t){e(this,s),this.element=t,this.timeline=this.element.find(".timeline"),this.timelineItems=this.timeline.find("li"),this.timelineItemsNumber=this.timelineItems.length,this.timelineStart=r(this.timelineItems.eq(0).text()),this.timelineUnitDuration=r(this.timelineItems.eq(1).text())-r(this.timelineItems.eq(0).text()),this.eventsWrapper=this.element.find(".events"),this.eventsGroup=this.eventsWrapper.find(".events-group"),this.singleEvents=this.eventsGroup.find(".single-event"),this.eventSlotHeight=this.eventsGroup.eq(0).children(".top-info").outerHeight(),this.modal=this.element.find(".event-modal"),this.modalHeader=this.modal.find(".header"),this.modalHeaderBg=this.modal.find(".header-bg"),this.modalBody=this.modal.find(".body"),this.modalBodyBg=this.modal.find(".body-bg"),this.modalMaxWidth=800,this.modalMaxHeight=480,this.animating=!1,this.initSchedule()}return n(s,[{key:"initSchedule",value:function(){this.scheduleReset(),this.initEvents()}},{key:"scheduleReset",value:function(){var e=this.mq();"desktop"!=e||this.element.hasClass("js-full")?"mobile"==e&&this.element.hasClass("js-full")?(this.element.removeClass("js-full loading"),this.eventsGroup.children("ul").add(this.singleEvents).removeAttr("style"),this.eventsWrapper.children(".grid-line").remove(),this.element.hasClass("modal-is-open")&&this.checkEventModal()):"desktop"==e&&this.element.hasClass("modal-is-open")?(this.checkEventModal("desktop"),this.element.removeClass("loading")):this.element.removeClass("loading"):(this.eventSlotHeight=this.eventsGroup.eq(0).children(".top-info").outerHeight(),this.element.addClass("js-full"),this.placeEvents(),this.element.hasClass("modal-is-open")&&this.checkEventModal())}},{key:"initEvents",value:function(){var e=this;this.singleEvents.each(function(){var n='<span class="event-date">'+t(this).data("start")+" - "+t(this).data("end")+"</span>";t(this).children("a").prepend(t(n)),t(this).on("click","a",function(n){n.preventDefault(),e.animating||e.openModal(t(this))})}),this.modal.on("click",".close",function(t){t.preventDefault(),e.animating||e.closeModal(e.eventsGroup.find(".selected-event"))}),this.element.on("click",".cover-layer",function(t){!e.animating&&e.element.hasClass("modal-is-open")&&e.closeModal(e.eventsGroup.find(".selected-event"))})}},{key:"placeEvents",value:function(){var e=this;this.singleEvents.each(function(){var n=r(t(this).attr("data-start")),i=r(t(this).attr("data-end"))-n,a=e.eventSlotHeight*(n-e.timelineStart)/e.timelineUnitDuration,s=e.eventSlotHeight*i/e.timelineUnitDuration;t(this).css({top:a-1+"px",height:s+1+"px"})}),this.element.removeClass("loading")}},{key:"openModal",value:function(e){var n=this,s=n.mq();if(this.animating=!0,this.modalHeader.find(".event-name").text(e.find(".event-name").text()),this.modalHeader.find(".event-date").text(e.find(".event-date").text()),this.modal.attr("data-event",e.parent().attr("data-event")),this.modalBody.find(".event-info").load(e.parent().attr("data-content")+".html .event-info > *",function(e){n.element.addClass("content-loaded")}),this.element.addClass("modal-is-open"),setTimeout(function(){e.parent("li").addClass("selected-event")},10),"mobile"==s)n.modal.one(i,function(){n.modal.off(i),n.animating=!1});else{var o=e.offset().top-t(window).scrollTop(),l=e.offset().left,d=e.innerHeight(),m=e.innerWidth(),r=t(window).width(),c=t(window).height(),f=.8*r>n.modalMaxWidth?n.modalMaxWidth:.8*r,p=.8*c>n.modalMaxHeight?n.modalMaxHeight:.8*c,u=parseInt((r-f)/2-l),v=parseInt((c-p)/2-o),g=p/d,x=f-m;n.modal.css({top:o+"px",left:l+"px",height:p+"px",width:f+"px"}),h(n.modal,"translateY("+v+"px) translateX("+u+"px)"),n.modalHeader.css({width:m+"px"}),n.modalBody.css({marginLeft:m+"px"}),n.modalBodyBg.css({height:d+"px",width:"1px"}),h(n.modalBodyBg,"scaleY("+g+") scaleX("+x+")"),n.modalHeaderBg.css({height:d+"px",width:m+"px"}),h(n.modalHeaderBg,"scaleY("+g+")"),n.modalHeaderBg.one(i,function(){n.modalHeaderBg.off(i),n.animating=!1,n.element.addClass("animation-completed")})}a||n.modal.add(n.modalHeaderBg).trigger(i)}},{key:"closeModal",value:function(e){var n=this,s=n.mq();if(this.animating=!0,"mobile"==s)this.element.removeClass("modal-is-open"),this.modal.one(i,function(){n.modal.off(i),n.animating=!1,n.element.removeClass("content-loaded"),e.removeClass("selected-event")});else{var o=e.offset().top-t(window).scrollTop(),l=e.offset().left,d=e.innerHeight(),m=e.innerWidth(),r=Number(n.modal.css("top").replace("px","")),c=l-Number(n.modal.css("left").replace("px","")),f=o-r;n.element.removeClass("animation-completed modal-is-open"),this.modal.css({width:m+"px",height:d+"px"}),h(n.modal,"translateX("+c+"px) translateY("+f+"px)"),h(n.modalBodyBg,"scaleX(0) scaleY(1)"),h(n.modalHeaderBg,"scaleY(1)"),this.modalHeaderBg.one(i,function(){n.modalHeaderBg.off(i),n.modal.addClass("no-transition"),setTimeout(function(){n.modal.add(n.modalHeader).add(n.modalBody).add(n.modalHeaderBg).add(n.modalBodyBg).attr("style","")},10),setTimeout(function(){n.modal.removeClass("no-transition")},20),n.animating=!1,n.element.removeClass("content-loaded"),e.removeClass("selected-event")})}a||n.modal.add(n.modalHeaderBg).trigger(i)}},{key:"mq",value:function(){return window.getComputedStyle(this.element.get(0),"::before").getPropertyValue("content").replace(/["']/g,"")}},{key:"checkEventModal",value:function(e){this.animating=!0;var n=this,i=this.mq();if("mobile"==i)n.modal.add(n.modalHeader).add(n.modalHeaderBg).add(n.modalBody).add(n.modalBodyBg).attr("style",""),n.modal.removeClass("no-transition"),n.animating=!1;else if("desktop"==i&&n.element.hasClass("modal-is-open")){n.modal.addClass("no-transition"),n.element.addClass("animation-completed");var a=n.eventsGroup.find(".selected-event"),s=(a.offset().top,t(window).scrollTop(),a.offset().left,a.innerHeight()),o=a.innerWidth(),l=t(window).width(),d=t(window).height(),m=.8*l>n.modalMaxWidth?n.modalMaxWidth:.8*l,r=.8*d>n.modalMaxHeight?n.modalMaxHeight:.8*d,c=r/s,f=m-o;setTimeout(function(){n.modal.css({width:m+"px",height:r+"px",top:d/2-r/2+"px",left:l/2-m/2+"px"}),h(n.modal,"translateY(0) translateX(0)"),n.modalBodyBg.css({height:r+"px",width:"1px"}),h(n.modalBodyBg,"scaleX("+f+")"),n.modalHeader.css({width:o+"px"}),n.modalBody.css({marginLeft:o+"px"}),n.modalHeaderBg.css({height:s+"px",width:o+"px"}),h(n.modalHeaderBg,"scaleY("+c+")")},10),setTimeout(function(){n.modal.removeClass("no-transition"),n.animating=!1},20)}}}]),s}(),o=t(".cd-schedule"),l=[],d=!1;function m(){l.forEach(function(e){e.scheduleReset()}),d=!1}function r(e){var t=(e=e.replace(/ /g,"")).split(":");return 60*parseInt(t[0])+parseInt(t[1])}function h(e,t){e.css({"-moz-transform":t,"-webkit-transform":t,"-ms-transform":t,"-o-transform":t,transform:t})}o.length>0&&o.each(function(){l.push(new s(t(this)))}),t(window).on("resize",function(){d||(d=!0,window.requestAnimationFrame?window.requestAnimationFrame(m):setTimeout(m))}),t(window).keyup(function(e){27==e.keyCode&&l.forEach(function(e){e.closeModal(e.eventsGroup.find(".selected-event"))})})});
},{}]},{},["d6sW"], null)
//# sourceMappingURL=main.965f5ef7.map